<div class="container-fluid my-5">
	<div class="row gy-4">
		<div class="col-lg-8">
			<div class="card">
				<div class="card-body p-3">
					@if (items.length < 1) { <div class="text-center text-muted py-3">
						Your cart is empty.
				</div>
				}
				@else {
				<div class="list-group p-2">
					@for (item of items; track $index) {
					<div class="list-group-item d-flex justify-content-center py-3 p-0 row">
						<div class="d-flex flex-column col-auto">
							<img class="rounded-2 border" [src]="item.product.url" [alt]="item.product.name" />
						</div>
						<div class="d-flex flex-column col mt-3">
							<div class="item-info d-flex justify-content-between">
								<div class="h4"><strong>{{ item.product.name }}</strong></div>
								<button (click)="removeItem(item)" class="btn btn-sm btn-outline-danger">Remove</button>
							</div>
							<div class="fw-bold text-primary">${{ item.product.price }}</div>
							<div class="d-flex gap-2 mt-auto">
								<span class="fw-semibold h5">Amout:</span>
								<input class="item-amout form-control form-control-sm" required min="1" max="99"
									type="number" name="amout" value="{{ item.quantity }}">
							</div>
						</div>
					</div>
					}
				</div>
				}
			</div>
			<div class="card-footer">
				<span class="fw-bold">Total:</span>
				<span class="h5 text-primary ms-1">${{ total }}</span>
			</div>
		</div>
	</div>
	<div class="col-lg-4">
		<div class="card">
			<div class="p-3">
				<h5 class="mb-3">Payment Details</h5>
				<form #form="ngForm" (ngSubmit)="pay()">
					<div class="mb-2">
						<label class="form-label small">Cardholder Name</label>
						<input name="name" class="form-control form-control-sm" required [(ngModel)]="payment.name" />
					</div>
					<div class="mb-2">
						<label class="form-label small">Card Number</label>
						<input type="text" name="cardNumber" class="form-control form-control-sm"
							placeholder="0123 4567 8910 1112" required [(ngModel)]="payment.cardNumber" minlength="16"
							maxlength="16" pattern="[0-9]+" />
					</div>
					<div class="row">
						<div class="col-6 mb-2">
							<label class="form-label small">Expiry Date</label>
							<input type="text" name="expiry" class="form-control form-control-sm" placeholder="MM/YY"
								required [(ngModel)]="payment.expiry" minlength="5" maxlength="5"
								pattern="(0[1-9]|1[0-2])\/([1-9][0-9])" />
						</div>
						<div class="col-6 mb-2">
							<label class="form-label small">CVV</label>
							<input type="text" name="cvv" class="form-control form-control-sm" required
								[(ngModel)]="payment.cvv" minlength="3" maxlength="4" pattern="[0-9]+" />
						</div>
					</div>
					<div class="mb-4">
						<label class="form-label small">Billing Address</label>
						<input name="address" class="form-control form-control-sm" required
							[(ngModel)]="payment.address" />
					</div>
					<input class="btn btn-success w-100" type="submit"
						[value]="total > 0 ? `Pay $${total}` : 'Nothing is free :)'"
						[disabled]="form.invalid || total === 0">
				</form>
			</div>
		</div>
	</div>
</div>